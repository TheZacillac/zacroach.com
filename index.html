import React, { useEffect } from "react";
import { motion } from "framer-motion";

// Chroma‑inspired, system‑theme aware, fully responsive landing
// Title: plainly "Coming Soon"

export default function ComingSoon() {
  useEffect(() => {
    // Page title
    document.title = "Coming Soon";
    // Set theme-color to match system theme background for better PWA/mobile chrome
    const meta = document.querySelector('meta[name="theme-color"]') || document.createElement("meta");
    meta.setAttribute("name", "theme-color");
    meta.setAttribute("content", getComputedStyle(document.documentElement).getPropertyValue("--surface").trim() || "#0b0b0f");
    if (!meta.parentElement) document.head.appendChild(meta);

    // Update on theme changes
    const mq = window.matchMedia("(prefers-color-scheme: dark)");
    const handler = () => {
      meta.setAttribute("content", getComputedStyle(document.documentElement).getPropertyValue("--surface").trim());
    };
    mq.addEventListener?.("change", handler);
    return () => mq.removeEventListener?.("change", handler);
  }, []);

  return (
    <main className="relative min-h-screen overflow-hidden antialiased [--pad:clamp(16px,4vw,48px)] flex items-center justify-center">
      {/* CSS Variables + base styles */}
      <style>{`
        :root {
          --surface: #0b0b0f; /* dark default to honor system dark */
          --text: #e6e6f0;
          --muted: #a3a3b2;
          --ring: 255 255 255 / 0.08;
          --accent-1: 186 230 253;  /* sky‑200 */
          --accent-2: 196 181 253;  /* violet‑200 */
          --accent-3: 134 239 172;  /* green‑300 */
          --grid: 255 255 255 / 0.05;
          --shadow: 0 10px 30px rgb(0 0 0 / 0.35), 0 2px 10px rgb(0 0 0 / 0.2);
        }
        @media (prefers-color-scheme: light) {
          :root {
            --surface: #ffffff;
            --text: #0b0b12;
            --muted: #5b5b6a;
            --ring: 0 0 0 / 0.06;
            --accent-1: 59 130 246;   /* blue‑500 */
            --accent-2: 168 85 247;   /* purple‑500 */
            --accent-3: 16 185 129;   /* emerald‑500 */
            --grid: 0 0 0 / 0.05;
            --shadow: 0 8px 24px rgb(0 0 0 / 0.1), 0 2px 8px rgb(0 0 0 / 0.06);
          }
        }
        body { background: var(--surface); color: var(--text); }
      `}</style>

      {/* Background layers: subtle radial gradient + animated blobs + grid */}
      <div aria-hidden className="pointer-events-none absolute inset-0">
        {/* radial glow */}
        <div className="absolute inset-0" style={{
          background:
            "radial-gradient(1200px 600px at 50% -10%, rgb(var(--accent-2)) / 0.15 0%, transparent 60%)," +
            "radial-gradient(800px 400px at 10% 110%, rgb(var(--accent-3)) / 0.12 0%, transparent 60%)," +
            "radial-gradient(900px 500px at 100% 10%, rgb(var(--accent-1)) / 0.12 0%, transparent 60%)"
        }} />

        {/* Grid overlay */}
        <svg className="absolute inset-0 mix-blend-overlay opacity-60" xmlns="http://www.w3.org/2000/svg">
          <defs>
            <pattern id="grid" width="64" height="64" patternUnits="userSpaceOnUse">
              <path d="M 64 0 L 0 0 0 64" fill="none" stroke={`rgba(${""}var(--grid))`} strokeWidth="1" />
            </pattern>
          </defs>
          <rect width="100%" height="100%" fill="url(#grid)" />
        </svg>

        {/* noise texture */}
        <div className="absolute inset-0 opacity-[0.06]" style={{
          backgroundImage: `url('data:image/svg+xml;utf8,${encodeURIComponent(`
            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"128\" height=\"128\"> 
              <filter id=\"n\"> 
                <feTurbulence type=\"fractalNoise\" baseFrequency=\"0.8\" numOctaves=\"4\" stitchTiles=\"stitch\"/> 
              </filter> 
              <rect width=\"100%\" height=\"100%\" filter=\"url(%23n)\" opacity=\"0.5\"/> 
            </svg>`)}')`
        }} />
      </div>

      {/* Floating accent blob */}
      <motion.div
        aria-hidden
        className="absolute -z-0 h-[40vmax] w-[40vmax] rounded-full blur-3xl"
        style={{
          background:
            "conic-gradient(from 180deg at 50% 50%, rgba(186,230,253,0.12), rgba(196,181,253,0.18), rgba(134,239,172,0.14), rgba(186,230,253,0.12))"
        }}
        initial={{ x: "-20%", y: "-10%", opacity: 0.6 }}
        animate={{ x: ["-20%", "5%", "-10%"], y: ["-10%", "5%", "-8%"], opacity: [0.6, 0.8, 0.7] }}
        transition={{ duration: 24, repeat: Infinity, ease: "easeInOut" }}
      />

      {/* Content */}
      <section className="relative z-10 mx-auto flex w-full max-w-4xl flex-col items-center gap-6 px-[--pad] text-center">
        <Badge>COMING SOON</Badge>
        <h1 className="text-balance font-semibold leading-none tracking-tight [font-size:clamp(2.5rem,8vw,6rem)]">
          <span className="bg-gradient-to-r from-[rgb(var(--accent-1))] via-[rgb(var(--accent-2))] to-[rgb(var(--accent-3))] bg-clip-text text-transparent">
            Coming Soon
          </span>
        </h1>
        <p className="max-w-prose text-pretty text-base md:text-lg" style={{ color: "var(--muted)" }}>
          Something crisp and colorful is on the way. This page respects your system theme and scales smoothly to any device.
        </p>

        {/* Decorative callout card */}
        <motion.div
          className="mt-2 w-full max-w-xl rounded-2xl border backdrop-blur-sm"
          style={{
            borderColor: `rgba(${""}var(--ring))`,
            boxShadow: "var(--shadow)",
            background:
              "linear-gradient(180deg, rgb(255 255 255 / 0.08), rgb(255 255 255 / 0.02))"
          }}
          initial={{ y: 12, opacity: 0 }}
          animate={{ y: 0, opacity: 1 }}
          transition={{ duration: 0.6, ease: "easeOut", delay: 0.1 }}
        >
          <div className="grid grid-cols-1 items-center gap-4 p-5 sm:grid-cols-3">
            <div className="col-span-2 text-left">
              <div className="text-sm" style={{ color: "var(--muted)" }}>
                We’ll launch when it’s ready — not when it’s rushed. 
              </div>
            </div>
            <div className="flex items-center justify-center">
              <a
                href="#"
                onClick={(e) => e.preventDefault()}
                className="group inline-flex items-center justify-center rounded-xl px-4 py-2 font-medium ring-1 transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2"
                style={{
                  color: "var(--text)",
                  boxShadow: "var(--shadow)",
                  background:
                    "linear-gradient(90deg, rgb(var(--accent-1)) / 0.15, rgb(var(--accent-2)) / 0.18, rgb(var(--accent-3)) / 0.18)",
                  borderColor: `rgba(${""}var(--ring))`
                }}
                aria-label="No action — just vibes"
              >
                Notify me (soon)
              </a>
            </div>
          </div>
        </motion.div>

        <Footer />
      </section>
    </main>
  );
}

function Badge({ children }: { children: React.ReactNode }) {
  return (
    <span
      className="inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs font-medium ring-1"
      style={{ borderColor: `rgba(${""}var(--ring))`, color: "var(--muted)", background: "rgb(0 0 0 / 0.06)" }}
      role="status"
      aria-live="polite"
    >
      <span className="relative h-2 w-2">
        <span className="absolute inset-0 animate-ping rounded-full" style={{ background: "rgb(134 239 172 / 0.7)" }} />
        <span className="absolute inset-0 rounded-full" style={{ background: "rgb(134 239 172 / 1)" }} />
      </span>
      {children}
    </span>
  );
}

function Footer() {
  const year = new Date().getFullYear();
  return (
    <footer className="mt-16 flex w-full max-w-3xl flex-col items-center gap-3 pb-10 text-center text-sm" style={{ color: "var(--muted)" }}>
      <div className="flex items-center gap-3">
        <span>© {year}</span>
        <span className="opacity-50">•</span>
        <span>All vibes, no hype (yet).</span>
      </div>
      <div className="opacity-60">
        Auto‑themed via <code className="rounded bg-black/10 px-1 py-0.5">prefers-color-scheme</code>. Responsive by design.
      </div>
    </footer>
  );
}
